# üìä API –ú–û–î–£–õ–Ø –ì–û–î–û–í–´–• –¢–ê–ë–õ–ò–¶ –†–ï–®–ï–ù–ò–ô - –§–†–û–ù–¢–ï–ù–î –ì–ê–ô–î

## üéØ –ö–û–ù–¶–ï–ü–¶–ò–Ø

**–ì–æ–¥–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Ä–µ—à–µ–Ω–∏–π** - —ç—Ç–æ –µ–¥–∏–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç –Ω–∞ –≥–æ–¥, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π:
- –í—Å–µ —Å–æ—Ä—Ç–∞, –∑–∞–≤–µ—Ä—à–∏–≤—à–∏–µ –∏—Å–ø—ã—Ç–∞–Ω–∏—è –≤ –æ–±–ª–∞—Å—Ç–∏
- –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ –≥–æ–¥–∞–º (—É—Ä–æ–∂–∞–π–Ω–æ—Å—Ç—å, –∫–∞—á–µ—Å—Ç–≤–æ)
- –†–µ—à–µ–Ω–∏–µ –ø–æ –∫–∞–∂–¥–æ–º—É —Å–æ—Ä—Ç—É (–æ–¥–æ–±—Ä–∏—Ç—å/—Å–Ω—è—Ç—å/–ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å)

**–ü—Ä–∏–º–µ—Ä:** "–£—Ä–æ–∂–∞–π –∫–ª—É–±–Ω–µ–π –∏ –¥—Ä—É–≥–∏–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –∏—Å–ø—ã—Ç—ã–≤–∞–µ–º—ã—Ö —Å–æ—Ä—Ç–æ–≤ –∫–∞—Ä—Ç–æ—Ñ–µ–ª—è - –ö–æ—Å—Ç–∞–Ω–∞–π—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å, 2024"

---

## üîÑ –ü–†–û–¶–ï–°–° (–∫—Ä–∞—Ç–∫–æ)

```
1. –ê–≥—Ä–æ–Ω–æ–º —Å–æ–∑–¥–∞–µ—Ç –≥–æ–¥–æ–≤—É—é —Ç–∞–±–ª–∏—Ü—É ‚Üí —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç —Å–æ—Ä—Ç–∞
2. –ü–æ –∫–∞–∂–¥–æ–º—É —Å–æ—Ä—Ç—É –∞–≥—Ä–æ–Ω–æ–º –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ä–µ—à–µ–Ω–∏–µ
3. –ö–æ–≥–¥–∞ –≤—Å–µ —Ä–µ—à–µ–Ω–∏—è –ø—Ä–∏–Ω—è—Ç—ã ‚Üí —Ç–∞–±–ª–∏—Ü–∞ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è
4. –≠–∫—Å–ø–æ—Ä—Ç –≤ Excel/PDF ‚Üí –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç –≥–æ—Ç–æ–≤
```

---

## üìã API ENDPOINTS

### 1Ô∏è‚É£ –°–ø–∏—Å–æ–∫ –≥–æ–¥–æ–≤—ã—Ö —Ç–∞–±–ª–∏—Ü

```http
GET /api/v1/annual-decision-tables/
```

**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `oblast_id` - —Ñ–∏–ª—å—Ç—Ä –ø–æ –æ–±–ª–∞—Å—Ç–∏
- `year` - —Ñ–∏–ª—å—Ç—Ä –ø–æ –≥–æ–¥—É
- `status` - —Ñ–∏–ª—å—Ç—Ä –ø–æ —Å—Ç–∞—Ç—É—Å—É (`draft` / `finalized`)
- `culture_id` - —Ñ–∏–ª—å—Ç—Ä –ø–æ –∫—É–ª—å—Ç—É—Ä–µ

**–ü—Ä–∏–º–µ—Ä:**
```http
GET /api/v1/annual-decision-tables/?oblast_id=1&year=2024&status=draft
```

**Response:**
```json
{
  "count": 2,
  "results": [
    {
      "id": 1,
      "year": 2024,
      "oblast": 1,
      "oblast_name": "–ö–æ—Å—Ç–∞–Ω–∞–π—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
      "culture": 5,
      "culture_name": "–ö–∞—Ä—Ç–æ—Ñ–µ–ª—å",
      "status": "draft",
      "status_display": "–ß–µ—Ä–Ω–æ–≤–∏–∫",
      "title": "–ì–æ–¥–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Ä–µ—à–µ–Ω–∏–π 2024 - –ö–æ—Å—Ç–∞–Ω–∞–π—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å - –ö–∞—Ä—Ç–æ—Ñ–µ–ª—å",
      "created_by": 2,
      "created_by_name": "–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω",
      "finalized_by": null,
      "finalized_by_name": null,
      "finalized_date": null,
      "created_at": "2024-10-01T10:00:00Z",
      "updated_at": "2024-10-15T14:30:00Z",
      "items_count": 13,
      "decisions_count": 10,
      "progress_percentage": 76.9,
      "statistics": {
        "total": 13,
        "approved": 8,
        "removed": 1,
        "continue": 1,
        "pending": 3
      }
    }
  ]
}
```

---

### 2Ô∏è‚É£ –°–æ–∑–¥–∞—Ç—å –≥–æ–¥–æ–≤—É—é —Ç–∞–±–ª–∏—Ü—É

```http
POST /api/v1/annual-decision-tables/
```

**Request:**
```json
{
  "year": 2024,
  "oblast": 1,
  "culture": 5,
  "auto_populate": true,
  "include_year_3": true,
  "include_year_2": true,
  "include_year_1": false
}
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `year` * - –≥–æ–¥ —Ç–∞–±–ª–∏—Ü—ã
- `oblast` * - ID –æ–±–ª–∞—Å—Ç–∏
- `culture` - ID –∫—É–ª—å—Ç—É—Ä—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- `auto_populate` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–∏—Ç—å —Å–æ—Ä—Ç–∞ (default: true)
- `include_year_3` - –≤–∫–ª—é—á–∏—Ç—å —Å–æ—Ä—Ç–∞ –Ω–∞ 3-–º –≥–æ–¥—É (default: true)
- `include_year_2` - –≤–∫–ª—é—á–∏—Ç—å —Å–æ—Ä—Ç–∞ –Ω–∞ 2-–º –≥–æ–¥—É (default: true)
- `include_year_1` - –≤–∫–ª—é—á–∏—Ç—å —Å–æ—Ä—Ç–∞ –Ω–∞ 1-–º –≥–æ–¥—É (default: false)

**Response:**
```json
{
  "id": 1,
  "year": 2024,
  "oblast": 1,
  "oblast_name": "–ö–æ—Å—Ç–∞–Ω–∞–π—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
  "culture": 5,
  "culture_name": "–ö–∞—Ä—Ç–æ—Ñ–µ–ª—å",
  "status": "draft",
  "title": "–ì–æ–¥–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Ä–µ—à–µ–Ω–∏–π 2024 - –ö–æ—Å—Ç–∞–Ω–∞–π—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å - –ö–∞—Ä—Ç–æ—Ñ–µ–ª—å",
  "items_count": 13,
  "decisions_count": 0,
  "progress_percentage": 0,
  "statistics": {
    "total": 13,
    "approved": 0,
    "removed": 0,
    "continue": 0,
    "pending": 13
  }
}
```

---

### 3Ô∏è‚É£ –î–µ—Ç–∞–ª–∏ –≥–æ–¥–æ–≤–æ–π —Ç–∞–±–ª–∏—Ü—ã (—Å —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏)

```http
GET /api/v1/annual-decision-tables/{id}/
```

**–ü—Ä–∏–º–µ—Ä:**
```http
GET /api/v1/annual-decision-tables/1/
```

**Response:**
```json
{
  "id": 1,
  "year": 2024,
  "oblast": 1,
  "oblast_name": "–ö–æ—Å—Ç–∞–Ω–∞–π—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
  "culture": 5,
  "culture_name": "–ö–∞—Ä—Ç–æ—Ñ–µ–ª—å",
  "status": "draft",
  "status_display": "–ß–µ—Ä–Ω–æ–≤–∏–∫",
  "title": "–ì–æ–¥–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Ä–µ—à–µ–Ω–∏–π 2024 - –ö–æ—Å—Ç–∞–Ω–∞–π—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å - –ö–∞—Ä—Ç–æ—Ñ–µ–ª—å",
  "items_count": 13,
  "progress_percentage": 76.9,
  "statistics": {
    "total": 13,
    "approved": 8,
    "removed": 1,
    "continue": 1,
    "pending": 3
  },
  "items": [
    {
      "id": 1,
      "row_number": 1,
      "sort_record": 1774,
      "sort_name": "–ö–æ—Ä–∏–Ω–Ω–∞",
      "sort_public_code": "KZ-2020-001",
      "sort_id": 1774,
      "maturity_group": "1",
      "yields_by_year": {
        "2022": 125,
        "2023": 210,
        "2024": 97
      },
      "average_yield": 144,
      "deviation_from_standard": 0,
      "last_year_data": {
        "tuber_weight": 142,
        "taste_score": 5,
        "marketable_percentage": 92.5,
        "damage_resistance": 95,
        "hollow_heart": 0,
        "diseases": {
          "dry_rot": 2,
          "scab": 0,
          "brown_spot": 0
        },
        "pests": {
          "wireworm": 0,
          "wet_rot": 0
        },
        "biochemistry": {
          "starch_content": {"2022": 11, "2023": 14.6},
          "dry_matter": {"2022": 21.9, "2023": 21.5},
          "vitamin_c": {"2022": 4.8, "2023": 16.9}
        }
      },
      "years_tested": 3,
      "year_started": 2022,
      "decision": "approved",
      "decision_display": "–û–¥–æ–±—Ä–µ–Ω–æ –∫ –≤–∫–ª—é—á–µ–Ω–∏—é –≤ –ì–æ—Å—Ä–µ–µ—Å—Ç—Ä",
      "decision_justification": "–°–æ—Ä—Ç –ø–æ–∫–∞–∑–∞–ª —Å—Ç–∞–±–∏–ª—å–Ω—É—é —É—Ä–æ–∂–∞–π–Ω–æ—Å—Ç—å –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞...",
      "decision_recommendations": "–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –ª–µ—Å–æ—Å—Ç–µ–ø–Ω–æ–π –∑–æ–Ω—ã...",
      "recommended_zones": [
        {
          "climate_zone_id": 1,
          "climate_zone_name": "–õ–µ—Å–æ—Å—Ç–µ–ø–Ω–∞—è",
          "region_ids": [1, 2, 3]
        }
      ],
      "continue_reason": null,
      "continue_until_year": null,
      "removal_reason": null,
      "decision_date": "2024-10-10",
      "decided_by": 2,
      "decided_by_name": "–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω",
      "created_at": "2024-10-01T10:00:00Z",
      "updated_at": "2024-10-10T15:20:00Z"
    },
    {
      "id": 2,
      "row_number": 2,
      "sort_name": "–ï–ª–∞–º–∞–Ω",
      "maturity_group": "2",
      "yields_by_year": {
        "2022": 124,
        "2023": 288,
        "2024": 107
      },
      "average_yield": 173,
      "decision": "approved",
      ...
    },
    {
      "id": 9,
      "row_number": 9,
      "sort_name": "–ù–æ—Ä–º–∞–Ω",
      "maturity_group": "3",
      "yields_by_year": {
        "2024": 165
      },
      "average_yield": 165,
      "years_tested": 1,
      "year_started": 2024,
      "decision": "pending",
      "decision_display": "–û–∂–∏–¥–∞–µ—Ç —Ä–µ—à–µ–Ω–∏—è",
      ...
    }
  ]
}
```

---

### 4Ô∏è‚É£ –ü—Ä–∏–Ω—è—Ç—å —Ä–µ—à–µ–Ω–∏–µ –ø–æ —Å–æ—Ä—Ç—É

```http
POST /api/v1/annual-decision-items/{item_id}/make-decision/
```

**Request (–û–¥–æ–±—Ä–∏—Ç—å):**
```json
{
  "decision": "approved",
  "decision_justification": "–°–æ—Ä—Ç –ø–æ–∫–∞–∑–∞–ª —Å—Ç–∞–±–∏–ª—å–Ω—É—é —É—Ä–æ–∂–∞–π–Ω–æ—Å—Ç—å –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞ (144 —Ü/–≥–∞ –∑–∞ 3 –≥–æ–¥–∞). –û—Ç–ª–∏—á–Ω—ã–µ –≤–∫—É—Å–æ–≤—ã–µ –∫–∞—á–µ—Å—Ç–≤–∞ (5 –±–∞–ª–ª–æ–≤). –í—ã—Å–æ–∫–∞—è —Ç–æ–≤–∞—Ä–Ω–æ—Å—Ç—å (92.5%). –£—Å—Ç–æ–π—á–∏–≤ –∫ –±–æ–ª–µ–∑–Ω—è–º –∏ –≤—Ä–µ–¥–∏—Ç–µ–ª—è–º.",
  "decision_recommendations": "–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –≤–æ–∑–¥–µ–ª—ã–≤–∞–Ω–∏—è –≤ –ª–µ—Å–æ—Å—Ç–µ–ø–Ω–æ–π –∑–æ–Ω–µ –ö–æ—Å—Ç–∞–Ω–∞–π—Å–∫–æ–π –æ–±–ª–∞—Å—Ç–∏ –Ω–∞ –±–æ–≥–∞—Ä–Ω—ã—Ö –∑–µ–º–ª—è—Ö. –û–ø—Ç–∏–º–∞–ª—å–Ω–∞—è –Ω–æ—Ä–º–∞ –ø–æ—Å–∞–¥–∫–∏: 45-50 —Ç—ã—Å. –∫–ª—É–±–Ω–µ–π/–≥–∞.",
  "recommended_zones": [
    {
      "climate_zone_id": 1,
      "climate_zone_name": "–õ–µ—Å–æ—Å—Ç–µ–ø–Ω–∞—è",
      "region_ids": [1, 2, 3]
    }
  ]
}
```

**Request (–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –∏—Å–ø—ã—Ç–∞–Ω–∏—è):**
```json
{
  "decision": "continue",
  "decision_justification": "–°–æ—Ä—Ç –ø–æ–∫–∞–∑–∞–ª —Ö–æ—Ä–æ—à–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã, –Ω–æ —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∫ –º–µ—Ö–∞–Ω–∏—á–µ—Å–∫–∏–º –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏—è–º —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ 54%, —á—Ç–æ –Ω–∏–∂–µ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è (70%). –¢—Ä–µ–±—É–µ—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –≥–æ–¥ –∏—Å–ø—ã—Ç–∞–Ω–∏–π –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö.",
  "continue_reason": "–ù–∏–∑–∫–∞—è —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∫ –º–µ—Ö–∞–Ω–∏—á–µ—Å–∫–∏–º –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏—è–º",
  "continue_until_year": 2025
}
```

**Request (–°–Ω—è—Ç—å —Å –∏—Å–ø—ã—Ç–∞–Ω–∏–π):**
```json
{
  "decision": "removed",
  "decision_justification": "–°–æ—Ä—Ç –ø–æ–∫–∞–∑–∞–ª —É—Ä–æ–∂–∞–π–Ω–æ—Å—Ç—å –Ω–∞ 28 —Ü/–≥–∞ –Ω–∏–∂–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞ –æ–±–ª–∞—Å—Ç–∏. –ù–µ—Å—Ç–∞–±–∏–ª—å–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –ø–æ –≥–æ–¥–∞–º. –ù–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –≤–æ–∑–¥–µ–ª—ã–≤–∞–Ω–∏—è –≤ —Ä–µ–≥–∏–æ–Ω–µ.",
  "removal_reason": "–£—Ä–æ–∂–∞–π–Ω–æ—Å—Ç—å —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ –Ω–∏–∂–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞"
}
```

**Response:**
```json
{
  "success": true,
  "message": "–†–µ—à–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ",
  "item": {
    "id": 1,
    "decision": "approved",
    "decision_display": "–û–¥–æ–±—Ä–µ–Ω–æ –∫ –≤–∫–ª—é—á–µ–Ω–∏—é –≤ –ì–æ—Å—Ä–µ–µ—Å—Ç—Ä",
    "decision_date": "2024-10-15",
    "decided_by": 2,
    "decided_by_name": "–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω",
    ...
  },
  "table_progress": 84.6
}
```

---

### 5Ô∏è‚É£ –ü–æ–ª—É—á–∏—Ç—å –¥–µ—Ç–∞–ª–∏ —ç–ª–µ–º–µ–Ω—Ç–∞ (—Å–æ—Ä—Ç–∞)

```http
GET /api/v1/annual-decision-items/{item_id}/
```

**Response:**
```json
{
  "id": 1,
  "row_number": 1,
  "sort_record": 1774,
  "sort_name": "–ö–æ—Ä–∏–Ω–Ω–∞",
  "sort_id": 1774,
  "yields_by_year": {
    "2022": 125,
    "2023": 210,
    "2024": 97
  },
  "average_yield": 144,
  "last_year_data": { ... },
  "decision": "approved",
  ...
  "sort_record_detail": {
    "id": 1774,
    "name": "–ö–æ—Ä–∏–Ω–Ω–∞",
    "culture": {
      "id": 5,
      "name": "–ö–∞—Ä—Ç–æ—Ñ–µ–ª—å"
    },
    "originators": [
      {
        "name": "–¢–û–û –ö–∞–∑–ù–ò–ò –∫–∞—Ä—Ç–æ—Ñ–µ–ª–µ–≤–æ–¥—Å—Ç–≤–∞",
        "percentage": 100
      }
    ],
    ...
  },
  "trials_data": [
    {
      "id": 15,
      "year": 2022,
      "region_name": "–ö–æ–≥–∞–ª–∏–Ω—Å–∫–∏–π –ì–°–£",
      "status": "completed",
      "status_display": "–ó–∞–≤–µ—Ä—à–µ–Ω–æ"
    },
    {
      "id": 28,
      "year": 2023,
      "region_name": "–ö–æ–≥–∞–ª–∏–Ω—Å–∫–∏–π –ì–°–£",
      "status": "completed",
      "status_display": "–ó–∞–≤–µ—Ä—à–µ–Ω–æ"
    },
    {
      "id": 42,
      "year": 2024,
      "region_name": "–ö–æ–≥–∞–ª–∏–Ω—Å–∫–∏–π –ì–°–£",
      "status": "lab_completed",
      "status_display": "–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ã–µ –∞–Ω–∞–ª–∏–∑—ã –∑–∞–≤–µ—Ä—à–µ–Ω—ã"
    }
  ]
}
```

---

### 6Ô∏è‚É£ –û–±–Ω–æ–≤–∏—Ç—å —Ä–µ—à–µ–Ω–∏–µ

```http
PATCH /api/v1/annual-decision-items/{item_id}/
```

**Request:**
```json
{
  "decision_justification": "–û–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ...",
  "decision_recommendations": "–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏..."
}
```

**Response:** –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç

---

### 7Ô∏è‚É£ –°–±—Ä–æ—Å–∏—Ç—å —Ä–µ—à–µ–Ω–∏–µ

```http
DELETE /api/v1/annual-decision-items/{item_id}/reset-decision/
```

**Response:**
```json
{
  "success": true,
  "message": "–†–µ—à–µ–Ω–∏–µ —Å–±—Ä–æ—à–µ–Ω–æ",
  "item": {
    "id": 1,
    "decision": "pending",
    "decision_date": null,
    "decided_by": null,
    ...
  }
}
```

---

### 8Ô∏è‚É£ –û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ –∏—Å–ø—ã—Ç–∞–Ω–∏–π

```http
POST /api/v1/annual-decision-items/{item_id}/refresh-data/
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:** –ü–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç —É—Ä–æ–∂–∞–π–Ω–æ—Å—Ç—å –∏ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –∏–∑ Trial/TrialResult

**Response:**
```json
{
  "success": true,
  "message": "–î–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω—ã",
  "item": {
    "yields_by_year": { ... },
    "average_yield": 144,
    "last_year_data": { ... }
  }
}
```

---

### 9Ô∏è‚É£ –ó–∞–≤–µ—Ä—à–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É (—Ñ–∏–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å)

```http
POST /api/v1/annual-decision-tables/{id}/finalize/
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —á—Ç–æ –≤—Å–µ —Ä–µ—à–µ–Ω–∏—è –ø—Ä–∏–Ω—è—Ç—ã
- –ë–ª–æ–∫–∏—Ä—É–µ—Ç —Ç–∞–±–ª–∏—Ü—É –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç status = 'finalized'

**Response (—É—Å–ø–µ—Ö):**
```json
{
  "success": true,
  "message": "–¢–∞–±–ª–∏—Ü–∞ —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∞",
  "table": {
    "id": 1,
    "status": "finalized",
    "finalized_date": "2024-10-15",
    "finalized_by": 2,
    "finalized_by_name": "–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω",
    ...
  }
}
```

**Response (–æ—à–∏–±–∫–∞ - –Ω–µ –≤—Å–µ —Ä–µ—à–µ–Ω–∏—è):**
```json
{
  "success": false,
  "error": "–ù–µ –≤—Å–µ —Ä–µ—à–µ–Ω–∏—è –ø—Ä–∏–Ω—è—Ç—ã",
  "details": {
    "total": 13,
    "decided": 10,
    "pending": 3
  }
}
```

---

### üîü –≠–∫—Å–ø–æ—Ä—Ç –≤ Excel

```http
GET /api/v1/annual-decision-tables/{id}/export-excel/
```

**Response:** Excel —Ñ–∞–π–ª

**–ò–º—è —Ñ–∞–π–ª–∞:** `Tablica_resheniy_KST_2024.xlsx`

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ Excel:**

| A | B | C | D | E | F | G | H | I | J |
|---|---|---|---|---|---|---|---|---|---|
| **–£–†–û–ñ–ê–ô –ö–õ–£–ë–ù–ï–ô –ò –î–†–£–ì–ò–ï –ü–û–ö–ê–ó–ê–¢–ï–õ–ò –ò–°–ü–´–¢–´–í–ê–ï–ú–´–• –°–û–†–¢–û–í** ||||||||| 
| **–ö–æ—Å—Ç–∞–Ω–∞–π—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å - –ö–∞—Ä—Ç–æ—Ñ–µ–ª—å** |||||||||
| **2024 –≥–æ–¥** |||||||||
| | | | | | | | | | |
| **‚Ññ –ø/–ø** | **–°–æ—Ä—Ç–∞** | **–ì—Ä—É–ø–ø–∞ —Å–ø–µ–ª–æ—Å—Ç–∏** | **2022** | **2023** | **2024** | **–°—Ä–µ–¥–Ω—è—è –∑–∞ 3 –≥–æ–¥–∞** | **–û—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ** | **–†–µ—à–µ–Ω–∏–µ** | **–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ** |
| 1 | –ö–æ—Ä–∏–Ω–Ω–∞ | 1 | 125 | 210 | 97 | 144 | —Å—Ç | –û–¥–æ–±—Ä–µ–Ω–æ | ... |
| 2 | –ï–ª–∞–º–∞–Ω | 2 | 124 | 288 | 107 | 173 | —Å—Ç | –û–¥–æ–±—Ä–µ–Ω–æ | ... |
| ... ||||||||

---

### 1Ô∏è‚É£1Ô∏è‚É£ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–∞–±–ª–∏—Ü—ã

```http
GET /api/v1/annual-decision-tables/{id}/statistics/
```

**Response:**
```json
{
  "table_id": 1,
  "year": 2024,
  "oblast": "–ö–æ—Å—Ç–∞–Ω–∞–π—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
  "statistics": {
    "total": 13,
    "approved": 8,
    "removed": 1,
    "continue": 1,
    "pending": 3
  },
  "progress_percentage": 76.9,
  "is_complete": false
}
```

---

## üé® UI –ö–û–ú–ü–û–ù–ï–ù–¢–´ –ò –°–ï–†–í–ò–°–´

### **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç 1: AnnualDecisionTableList**

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°–ø–∏—Å–æ–∫ –≥–æ–¥–æ–≤—ã—Ö —Ç–∞–±–ª–∏—Ü

**–ü—É—Ç—å:** `/decisions/annual-tables`

**State:**
```typescript
interface AnnualTableListState {
  tables: AnnualDecisionTable[];
  loading: boolean;
  filters: {
    oblast_id?: number;
    year?: number;
    status?: 'draft' | 'finalized';
    culture_id?: number;
  };
}
```

**API –≤—ã–∑–æ–≤—ã:**
```typescript
// –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞
const loadTables = async (filters) => {
  const response = await api.get('/annual-decision-tables/', { params: filters });
  return response.data.results;
};
```

**UI –¥–µ–π—Å—Ç–≤–∏—è:**
- –ü—Ä–æ—Å–º–æ—Ç—Ä —Ç–∞–±–ª–∏—Ü—ã ‚Üí navigate to `/decisions/annual-tables/{id}`
- –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É ‚Üí open modal `CreateAnnualTableModal`
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –æ–±–ª–∞—Å—Ç–∏/–≥–æ–¥—É/—Å—Ç–∞—Ç—É—Å—É

---

### **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç 2: CreateAnnualTableModal**

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü—ã

**Form data:**
```typescript
interface CreateTableForm {
  year: number;
  oblast: number;
  culture?: number;
  auto_populate: boolean;
  include_year_3: boolean;
  include_year_2: boolean;
  include_year_1: boolean;
}
```

**API –≤—ã–∑–æ–≤:**
```typescript
const createTable = async (data: CreateTableForm) => {
  const response = await api.post('/annual-decision-tables/', data);
  return response.data;
};
```

**–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è:**
‚Üí –ó–∞–∫—Ä—ã—Ç—å modal
‚Üí –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ –¥–µ—Ç–∞–ª–∏ —Ç–∞–±–ª–∏—Ü—ã `/decisions/annual-tables/{id}`

---

### **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç 3: AnnualDecisionTableView**

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω —Ä–∞–±–æ—Ç—ã —Å —Ç–∞–±–ª–∏—Ü–µ–π

**–ü—É—Ç—å:** `/decisions/annual-tables/{id}`

**State:**
```typescript
interface TableViewState {
  table: AnnualDecisionTable;
  items: AnnualDecisionItem[];
  selectedItem: AnnualDecisionItem | null;
  showDecisionModal: boolean;
  expandedColumns: boolean;
  loading: boolean;
}
```

**API –≤—ã–∑–æ–≤—ã:**
```typescript
// –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–∞–±–ª–∏—Ü—ã —Å —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏
const loadTable = async (id: number) => {
  const response = await api.get(`/annual-decision-tables/${id}/`);
  return response.data;
};

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã (polling –¥–ª—è real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π)
const refreshTable = async (id: number) => {
  const response = await api.get(`/annual-decision-tables/${id}/`);
  return response.data;
};
```

**UI —ç–ª–µ–º–µ–Ω—Ç—ã:**

1. **–ó–∞–≥–æ–ª–æ–≤–æ–∫ —Ç–∞–±–ª–∏—Ü—ã:**
   - –ù–∞–∑–≤–∞–Ω–∏–µ
   - –°—Ç–∞—Ç—É—Å (–ß–µ—Ä–Ω–æ–≤–∏–∫/–ó–∞–≤–µ—Ä—à–µ–Ω–∞)
   - –ü—Ä–æ–≥—Ä–µ—Å—Å (10/13 —Ä–µ—à–µ–Ω–∏–π, 76.9%)

2. **–ü–∞–Ω–µ–ª—å –¥–µ–π—Å—Ç–≤–∏–π:**
   - `[üì• –≠–∫—Å–ø–æ—Ä—Ç Excel]` ‚Üí —Å–∫–∞—á–∞—Ç—å —Ñ–∞–π–ª
   - `[‚úÖ –ó–∞–≤–µ—Ä—à–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É]` ‚Üí finalize endpoint
   - `[‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∫–æ–ª–æ–Ω–∫–∏]` ‚Üí –ø–æ–∫–∞–∑–∞—Ç—å/—Å–∫—Ä—ã—Ç—å –∫–æ–ª–æ–Ω–∫–∏

3. **–¢–∞–±–ª–∏—Ü–∞ –¥–∞–Ω–Ω—ã—Ö:**
   - –°—Ç—Ä–æ–∫–∏ = items
   - –ö–æ–ª–æ–Ω–∫–∏ = –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏
   - –î–µ–π—Å—Ç–≤–∏—è –Ω–∞ —Å—Ç—Ä–æ–∫–µ: `[–ü—Ä–∏–Ω—è—Ç—å —Ä–µ—à–µ–Ω–∏–µ]` / `[–ü—Ä–æ—Å–º–æ—Ç—Ä]` / `[–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å]`

4. **–§–∏–ª—å—Ç—Ä—ã/–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞:**
   - –§–∏–ª—å—Ç—Ä –ø–æ —Ä–µ—à–µ–Ω–∏—é (–≤—Å–µ/–æ–¥–æ–±—Ä–µ–Ω–æ/—Å–Ω—è—Ç–æ/–ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å/–æ–∂–∏–¥–∞–µ—Ç)
   - –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –∫–æ–ª–æ–Ω–∫–∞–º

---

### **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç 4: DecisionModal**

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏—è

**Props:**
```typescript
interface DecisionModalProps {
  item: AnnualDecisionItem;
  onClose: () => void;
  onSave: (decision: DecisionFormData) => void;
}
```

**Form data:**
```typescript
interface DecisionFormData {
  decision: 'approved' | 'continue' | 'removed';
  decision_justification: string;
  decision_recommendations?: string;
  recommended_zones?: RecommendedZone[];
  continue_reason?: string;
  continue_until_year?: number;
  removal_reason?: string;
}
```

**API –≤—ã–∑–æ–≤:**
```typescript
const makeDecision = async (itemId: number, data: DecisionFormData) => {
  const response = await api.post(
    `/annual-decision-items/${itemId}/make-decision/`,
    data
  );
  return response.data;
};
```

**UI –ª–æ–≥–∏–∫–∞:**

1. **–ü–æ–∫–∞–∑–∞—Ç—å –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
   - –£—Ä–æ–∂–∞–π–Ω–æ—Å—Ç—å –ø–æ –≥–æ–¥–∞–º (—Ç–∞–±–ª–∏—Ü–∞ + –≥—Ä–∞—Ñ–∏–∫)
   - –ü–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –∫–∞—á–µ—Å—Ç–≤–∞
   - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–º

2. **–§–æ—Ä–º–∞ —Ä–µ—à–µ–Ω–∏—è:**
   - Radio buttons: –û–¥–æ–±—Ä–∏—Ç—å / –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å / –°–Ω—è—Ç—å
   - –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ (textarea, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
   - –£—Å–ª–æ–≤–Ω—ã–µ –ø–æ–ª—è:
     - –ï—Å–ª–∏ "–û–¥–æ–±—Ä–∏—Ç—å" ‚Üí –ø–æ–∫–∞–∑–∞—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ + –∑–æ–Ω—ã
     - –ï—Å–ª–∏ "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å" ‚Üí –ø–æ–∫–∞–∑–∞—Ç—å –ø—Ä–∏—á–∏–Ω—É + –¥–æ –≥–æ–¥–∞
     - –ï—Å–ª–∏ "–°–Ω—è—Ç—å" ‚Üí –ø–æ–∫–∞–∑–∞—Ç—å –ø—Ä–∏—á–∏–Ω—É

3. **–ö–Ω–æ–ø–∫–∏:**
   - `[–û—Ç–º–µ–Ω–∞]` ‚Üí –∑–∞–∫—Ä—ã—Ç—å modal
   - `[–°–æ—Ö—Ä–∞–Ω–∏—Ç—å]` ‚Üí –≤—ã–∑–≤–∞—Ç—å API, –æ–±–Ω–æ–≤–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É

---

### **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç 5: DecisionDetailsView**

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è

**Props:**
```typescript
interface DecisionDetailsViewProps {
  item: AnnualDecisionItem;
  readOnly: boolean;  // true –µ—Å–ª–∏ —Ç–∞–±–ª–∏—Ü–∞ finalized
}
```

**UI –±–ª–æ–∫–∏:**

1. **–®–∞–ø–∫–∞:**
   - –°–æ—Ä—Ç + —Å—Ç–∞—Ç—É—Å —Ä–µ—à–µ–Ω–∏—è
   - –î–∞—Ç–∞ + –∫—Ç–æ –ø—Ä–∏–Ω—è–ª

2. **–î–∞–Ω–Ω—ã–µ –∏—Å–ø—ã—Ç–∞–Ω–∏–π:**
   - –¢–∞–±–ª–∏—Ü–∞ —É—Ä–æ–∂–∞–π–Ω–æ—Å—Ç–∏ –ø–æ –ì–°–£ –∏ –≥–æ–¥–∞–º
   - –ì—Ä–∞—Ñ–∏–∫ —É—Ä–æ–∂–∞–π–Ω–æ—Å—Ç–∏
   - –ü–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –∫–∞—á–µ—Å—Ç–≤–∞ (—Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã–µ)

3. **–†–µ—à–µ–Ω–∏–µ:**
   - –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ (text block)
   - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ (text block)
   - –ó–æ–Ω—ã –≤–æ–∑–¥–µ–ª—ã–≤–∞–Ω–∏—è (—Å–ø–∏—Å–æ–∫)

4. **–°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã:**
   - –§–æ—Ä–º—ã 008 –ø–æ –≥–æ–¥–∞–º
   - –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ã–µ –∞–Ω–∞–ª–∏–∑—ã

5. **–î–µ–π—Å—Ç–≤–∏—è:**
   - `[–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å]` (–µ—Å–ª–∏ status='draft')
   - `[–≠–∫—Å–ø–æ—Ä—Ç –≤ PDF]`

---

## üîß –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –°–ï–†–í–ò–°–´

### **Service: AnnualDecisionsService**

```typescript
class AnnualDecisionsService {
  // –°–ø–∏—Å–æ–∫ —Ç–∞–±–ª–∏—Ü
  async getTables(filters?: TableFilters): Promise<AnnualDecisionTable[]> {
    const response = await api.get('/annual-decision-tables/', { params: filters });
    return response.data.results;
  }
  
  // –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É
  async createTable(data: CreateTableData): Promise<AnnualDecisionTable> {
    const response = await api.post('/annual-decision-tables/', data);
    return response.data;
  }
  
  // –î–µ—Ç–∞–ª–∏ —Ç–∞–±–ª–∏—Ü—ã
  async getTableDetails(id: number): Promise<AnnualDecisionTableDetail> {
    const response = await api.get(`/annual-decision-tables/${id}/`);
    return response.data;
  }
  
  // –ó–∞–≤–µ—Ä—à–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É
  async finalizeTable(id: number): Promise<ApiResponse> {
    const response = await api.post(`/annual-decision-tables/${id}/finalize/`);
    return response.data;
  }
  
  // –≠–∫—Å–ø–æ—Ä—Ç –≤ Excel
  async exportExcel(id: number): Promise<Blob> {
    const response = await api.get(
      `/annual-decision-tables/${id}/export-excel/`,
      { responseType: 'blob' }
    );
    return response.data;
  }
  
  // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–∞–±–ª–∏—Ü—ã
  async getStatistics(id: number): Promise<TableStatistics> {
    const response = await api.get(`/annual-decision-tables/${id}/statistics/`);
    return response.data;
  }
  
  // –≠–ª–µ–º–µ–Ω—Ç—ã —Ç–∞–±–ª–∏—Ü—ã
  async getItems(tableId: number): Promise<AnnualDecisionItem[]> {
    const response = await api.get('/annual-decision-items/', {
      params: { table_id: tableId }
    });
    return response.data.results;
  }
  
  // –î–µ—Ç–∞–ª–∏ —ç–ª–µ–º–µ–Ω—Ç–∞
  async getItemDetails(itemId: number): Promise<AnnualDecisionItemDetail> {
    const response = await api.get(`/annual-decision-items/${itemId}/`);
    return response.data;
  }
  
  // –ü—Ä–∏–Ω—è—Ç—å —Ä–µ—à–µ–Ω–∏–µ
  async makeDecision(itemId: number, data: DecisionData): Promise<ApiResponse> {
    const response = await api.post(
      `/annual-decision-items/${itemId}/make-decision/`,
      data
    );
    return response.data;
  }
  
  // –°–±—Ä–æ—Å–∏—Ç—å —Ä–µ—à–µ–Ω–∏–µ
  async resetDecision(itemId: number): Promise<ApiResponse> {
    const response = await api.delete(`/annual-decision-items/${itemId}/reset-decision/`);
    return response.data;
  }
  
  // –û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç–∞
  async refreshItemData(itemId: number): Promise<ApiResponse> {
    const response = await api.post(`/annual-decision-items/${itemId}/refresh-data/`);
    return response.data;
  }
}

export const annualDecisionsService = new AnnualDecisionsService();
```

---

## üìä –¢–ò–ü–´ –î–ê–ù–ù–´–• (TypeScript)

```typescript
// –ì–æ–¥–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞
interface AnnualDecisionTable {
  id: number;
  year: number;
  oblast: number;
  oblast_name: string;
  culture: number | null;
  culture_name: string | null;
  status: 'draft' | 'finalized';
  status_display: string;
  title: string;
  created_by: number;
  created_by_name: string;
  finalized_by: number | null;
  finalized_by_name: string | null;
  finalized_date: string | null;
  created_at: string;
  updated_at: string;
  items_count: number;
  decisions_count: number;
  progress_percentage: number;
  statistics: TableStatistics;
}

// –¢–∞–±–ª–∏—Ü–∞ —Å —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏
interface AnnualDecisionTableDetail extends AnnualDecisionTable {
  items: AnnualDecisionItem[];
}

// –≠–ª–µ–º–µ–Ω—Ç —Ç–∞–±–ª–∏—Ü—ã (—Å—Ç—Ä–æ–∫–∞ = —Å–æ—Ä—Ç)
interface AnnualDecisionItem {
  id: number;
  row_number: number;
  sort_record: number;
  sort_name: string;
  sort_public_code: string;
  sort_id: number;
  maturity_group: string;
  yields_by_year: YieldsByYear;
  average_yield: number;
  deviation_from_standard: number;
  last_year_data: LastYearData;
  years_tested: number;
  year_started: number;
  decision: 'pending' | 'approved' | 'continue' | 'removed';
  decision_display: string;
  decision_justification: string;
  decision_recommendations: string;
  recommended_zones: RecommendedZone[];
  continue_reason: string | null;
  continue_until_year: number | null;
  removal_reason: string | null;
  decision_date: string | null;
  decided_by: number | null;
  decided_by_name: string | null;
  created_at: string;
  updated_at: string;
}

// –î–µ—Ç–∞–ª—å–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç (—Å –ø–æ–ª–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π)
interface AnnualDecisionItemDetail extends AnnualDecisionItem {
  sort_record_detail: SortRecordDetail;
  trials_data: TrialData[];
}

// –£—Ä–æ–∂–∞–π–Ω–æ—Å—Ç—å –ø–æ –≥–æ–¥–∞–º
interface YieldsByYear {
  [year: string]: number;  // {"2022": 125, "2023": 210, "2024": 97}
}

// –ü–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –≥–æ–¥–∞
interface LastYearData {
  tuber_weight?: number;
  taste_score?: number;
  marketable_percentage?: number;
  damage_resistance?: number;
  hollow_heart?: number;
  diseases?: {
    dry_rot?: number;
    scab?: number;
    brown_spot?: number;
  };
  pests?: {
    wireworm?: number;
    wet_rot?: number;
  };
  biochemistry?: {
    starch_content?: { [year: string]: number };
    dry_matter?: { [year: string]: number };
    vitamin_c?: { [year: string]: number };
  };
}

// –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –∑–æ–Ω—ã
interface RecommendedZone {
  climate_zone_id: number;
  climate_zone_name: string;
  region_ids: number[];
}

// –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–∞–±–ª–∏—Ü—ã
interface TableStatistics {
  total: number;
  approved: number;
  removed: number;
  continue: number;
  pending: number;
}

// –î–∞–Ω–Ω—ã–µ –∏—Å–ø—ã—Ç–∞–Ω–∏—è
interface TrialData {
  id: number;
  year: number;
  region_name: string;
  status: string;
  status_display: string;
}
```

---

## üí° –ü–†–ò–ú–ï–†–´ –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Ø

### **–ü—Ä–∏–º–µ—Ä 1: –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ —Ç–∞–±–ª–∏—Ü**

```typescript
import { annualDecisionsService } from '@/services/annual-decisions';

const DashboardPage = () => {
  const [tables, setTables] = useState<AnnualDecisionTable[]>([]);
  
  useEffect(() => {
    const loadData = async () => {
      const data = await annualDecisionsService.getTables({
        oblast_id: 1,
        year: 2024,
        status: 'draft'
      });
      setTables(data);
    };
    loadData();
  }, []);
  
  return (
    <div>
      <h1>–ì–æ–¥–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã —Ä–µ—à–µ–Ω–∏–π</h1>
      {tables.map(table => (
        <TableCard key={table.id} table={table} />
      ))}
    </div>
  );
};
```

---

### **–ü—Ä–∏–º–µ—Ä 2: –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã**

```typescript
const handleCreateTable = async () => {
  try {
    const newTable = await annualDecisionsService.createTable({
      year: 2024,
      oblast: 1,
      culture: 5,  // –ö–∞—Ä—Ç–æ—Ñ–µ–ª—å
      auto_populate: true,
      include_year_3: true,
      include_year_2: true,
      include_year_1: false
    });
    
    // –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ —Å–æ–∑–¥–∞–Ω–Ω—É—é —Ç–∞–±–ª–∏—Ü—É
    navigate(`/decisions/annual-tables/${newTable.id}`);
    
    toast.success(`–°–æ–∑–¥–∞–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ —Å ${newTable.items_count} —Å–æ—Ä—Ç–∞–º–∏`);
  } catch (error) {
    toast.error('–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü—ã');
  }
};
```

---

### **–ü—Ä–∏–º–µ—Ä 3: –ü—Ä–∏–Ω—è—Ç–∏–µ —Ä–µ—à–µ–Ω–∏—è**

```typescript
const handleMakeDecision = async (itemId: number, formData: DecisionFormData) => {
  try {
    const result = await annualDecisionsService.makeDecision(itemId, {
      decision: 'approved',
      decision_justification: formData.justification,
      decision_recommendations: formData.recommendations,
      recommended_zones: formData.zones
    });
    
    toast.success('–†–µ—à–µ–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ');
    
    // –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å —Ç–∞–±–ª–∏—Ü—ã
    setTableProgress(result.table_progress);
    
    // –ó–∞–∫—Ä—ã—Ç—å modal
    setShowDecisionModal(false);
    
    // –û–±–Ω–æ–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
    refreshTable();
  } catch (error) {
    toast.error('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–µ—à–µ–Ω–∏—è');
  }
};
```

---

### **–ü—Ä–∏–º–µ—Ä 4: –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã**

```typescript
const handleFinalizeTable = async (tableId: number) => {
  try {
    const result = await annualDecisionsService.finalizeTable(tableId);
    
    if (result.success) {
      toast.success('–¢–∞–±–ª–∏—Ü–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ –∏ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞');
      refreshTable();
    }
  } catch (error) {
    if (error.response?.data?.error === '–ù–µ –≤—Å–µ —Ä–µ—à–µ–Ω–∏—è –ø—Ä–∏–Ω—è—Ç—ã') {
      const details = error.response.data.details;
      toast.warning(
        `–ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –∑–∞–≤–µ—Ä—à–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É. ` +
        `–†–µ—à–µ–Ω–∏–π –ø—Ä–∏–Ω—è—Ç–æ: ${details.decided}/${details.total}. ` +
        `–û–∂–∏–¥–∞—é—Ç —Ä–µ—à–µ–Ω–∏—è: ${details.pending} —Å–æ—Ä—Ç–æ–≤.`
      );
    } else {
      toast.error('–û—à–∏–±–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ç–∞–±–ª–∏—Ü—ã');
    }
  }
};
```

---

### **–ü—Ä–∏–º–µ—Ä 5: –≠–∫—Å–ø–æ—Ä—Ç –≤ Excel**

```typescript
const handleExportExcel = async (tableId: number, tableName: string) => {
  try {
    const blob = await annualDecisionsService.exportExcel(tableId);
    
    // –°–æ–∑–¥–∞—Ç—å —Å—Å—ã–ª–∫—É –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
    const url = window.URL.createObjectURL(blob);
    const link = document.createElement('a');
    link.href = url;
    link.download = `${tableName}.xlsx`;
    link.click();
    
    toast.success('–§–∞–π–ª Excel —Å–∫–∞—á–∞–Ω');
  } catch (error) {
    toast.error('–û—à–∏–±–∫–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞');
  }
};
```

---

## üé® UI –ú–ê–ö–ï–¢–´ (Wireframes)

### **–ú–∞–∫–µ—Ç 1: –¢–∞–±–ª–∏—Ü–∞ —Å —Ä–µ—à–µ–Ω–∏—è–º–∏**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ üìä –ì–æ–¥–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞ 2024 - –ö–æ—Å—Ç–∞–Ω–∞–π—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å - –ö–∞—Ä—Ç–æ—Ñ–µ–ª—å      ‚îÇ
‚îÇ –°—Ç–∞—Ç—É—Å: –ß–µ—Ä–Ω–æ–≤–∏–∫ | –ü—Ä–æ–≥—Ä–µ—Å—Å: 10/13 (76.9%)                     ‚îÇ
‚îÇ [üì• Excel] [‚úÖ –ó–∞–≤–µ—Ä—à–∏—Ç—å] [‚öôÔ∏è –ö–æ–ª–æ–Ω–∫–∏]                          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ –§–∏–ª—å—Ç—Ä: [–í—Å–µ —Ä–µ—à–µ–Ω–∏—è ‚ñº] [–ì—Ä—É–ø–ø–∞: –í—Å–µ ‚ñº] [–ü–æ–∏—Å–∫...]            ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ ‚Ññ ‚îÇ –°–æ—Ä—Ç    ‚îÇ –ì—Ä ‚îÇ2022 ‚îÇ2023 ‚îÇ2024 ‚îÇ–°—Ä–µ–¥–Ω.‚îÇ–û—Ç–∫.‚îÇ –†–µ—à–µ–Ω–∏–µ  ‚îÇ    ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ 1 ‚îÇ–ö–æ—Ä–∏–Ω–Ω–∞  ‚îÇ 1  ‚îÇ 125 ‚îÇ 210 ‚îÇ 97  ‚îÇ 144  ‚îÇ—Å—Ç  ‚îÇ‚úÖ–û–¥–æ–±—Ä–µ–Ω–æ‚îÇ[üëÅÔ∏è]‚îÇ
‚îÇ 2 ‚îÇ–ï–ª–∞–º–∞–Ω   ‚îÇ 2  ‚îÇ 124 ‚îÇ 288 ‚îÇ 107 ‚îÇ 173  ‚îÇ—Å—Ç  ‚îÇ‚úÖ–û–¥–æ–±—Ä–µ–Ω–æ‚îÇ[üëÅÔ∏è]‚îÇ
‚îÇ 3 ‚îÇ–õ–∞–±–µ–ª–ª–∞  ‚îÇ 2  ‚îÇ 140 ‚îÇ 372 ‚îÇ 190 ‚îÇ 234  ‚îÇ—Å—Ç  ‚îÇ‚úÖ–û–¥–æ–±—Ä–µ–Ω–æ‚îÇ[üëÅÔ∏è]‚îÇ
‚îÇ 4 ‚îÇ–ó–æ—Ä–±–∞    ‚îÇ 2  ‚îÇ 141 ‚îÇ 235 ‚îÇ 148 ‚îÇ 175  ‚îÇ—Å—Ç  ‚îÇüîÑ–ü—Ä–æ–¥–æ–ª–∂.‚îÇ[üëÅÔ∏è]‚îÇ
‚îÇ 9 ‚îÇ–ù–æ—Ä–º–∞–Ω   ‚îÇ 3  ‚îÇ  -  ‚îÇ  -  ‚îÇ 165 ‚îÇ 165  ‚îÇ+43 ‚îÇ‚è≥ –û–∂–∏–¥–∞–µ—Ç‚îÇ[‚úèÔ∏è]‚îÇ
‚îÇ10 ‚îÇ–ö–∞–º–µ–ª–∏—è  ‚îÇ 3  ‚îÇ  -  ‚îÇ  -  ‚îÇ 170 ‚îÇ 170  ‚îÇ+48 ‚îÇ‚è≥ –û–∂–∏–¥–∞–µ—Ç‚îÇ[‚úèÔ∏è]‚îÇ
‚îÇ12 ‚îÇ–ê–∫—É—Å—Ç–∏–∫  ‚îÇ 4  ‚îÇ 210 ‚îÇ 226 ‚îÇ 152 ‚îÇ 196  ‚îÇ—Å—Ç  ‚îÇ‚è≥ –û–∂–∏–¥–∞–µ—Ç‚îÇ[‚úèÔ∏è]‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### **–ú–∞–∫–µ—Ç 2: –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ—à–µ–Ω–∏—è**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –ü—Ä–∏–Ω—è—Ç–∏–µ —Ä–µ—à–µ–Ω–∏—è: "–ù–æ—Ä–º–∞–Ω"                    [√ó]   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                     ‚îÇ
‚îÇ üìä –î–ê–ù–ù–´–ï –ò–°–ü–´–¢–ê–ù–ò–ô                                 ‚îÇ
‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ ‚îÇ –ì–æ–¥ ‚îÇ –ì–°–£          ‚îÇ –£—Ä–æ–∂–∞–π–Ω–æ—Å—Ç—å              ‚îÇ ‚îÇ
‚îÇ ‚îÇ 2024‚îÇ –ö–æ–≥–∞–ª–∏–Ω—Å–∫–∏–π  ‚îÇ 165 —Ü/–≥–∞ (+43 –æ—Ç —Å—Ç–∞–Ω–¥.) ‚îÇ ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ                                                     ‚îÇ
‚îÇ ‚öñÔ∏è –†–ï–®–ï–ù–ò–ï                                          ‚îÇ
‚îÇ ( ) ‚úÖ –û–¥–æ–±—Ä–∏—Ç—å –∫ –≤–∫–ª—é—á–µ–Ω–∏—é –≤ –ì–æ—Å—Ä–µ–µ—Å—Ç—Ä             ‚îÇ
‚îÇ (*) üîÑ –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –∏—Å–ø—ã—Ç–∞–Ω–∏—è                        ‚îÇ
‚îÇ ( ) ‚ùå –°–Ω—è—Ç—å —Å –∏—Å–ø—ã—Ç–∞–Ω–∏–π                            ‚îÇ
‚îÇ                                                     ‚îÇ
‚îÇ –ü—Ä–∏—á–∏–Ω–∞ –ø—Ä–æ–¥–ª–µ–Ω–∏—è: *                                ‚îÇ
‚îÇ [–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–∞–Ω–Ω—ã—Ö (1 –≥–æ–¥ –∏—Å–ø—ã—Ç–∞–Ω–∏–π) ‚ñº]          ‚îÇ
‚îÇ                                                     ‚îÇ
‚îÇ –ü—Ä–æ–¥–ª–∏—Ç—å –¥–æ –≥–æ–¥–∞: *                                 ‚îÇ
‚îÇ [2025 ‚ñº]                                            ‚îÇ
‚îÇ                                                     ‚îÇ
‚îÇ –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ: *                                      ‚îÇ
‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ ‚îÇ –°–æ—Ä—Ç –ø–æ–∫–∞–∑–∞–ª —Ö–æ—Ä–æ—à—É—é —É—Ä–æ–∂–∞–π–Ω–æ—Å—Ç—å (+43 –æ—Ç        ‚îÇ ‚îÇ
‚îÇ ‚îÇ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞), –Ω–æ –∏–º–µ–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ 1 –≥–æ–¥ –¥–∞–Ω–Ω—ã—Ö.     ‚îÇ ‚îÇ
‚îÇ ‚îÇ –¢—Ä–µ–±—É–µ—Ç—Å—è –º–∏–Ω–∏–º—É–º 2 –≥–æ–¥–∞ –¥–ª—è –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏—è.  ‚îÇ ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ                                                     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ [–û—Ç–º–µ–Ω–∞]                         [üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å]    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üì± –ú–ê–†–®–†–£–¢–´ (Routes)

```typescript
const routes = [
  {
    path: '/decisions',
    element: <DecisionsLayout />,
    children: [
      // –°–ø–∏—Å–æ–∫ —Ç–∞–±–ª–∏—Ü
      {
        path: 'annual-tables',
        element: <AnnualTablesList />
      },
      
      // –î–µ—Ç–∞–ª–∏ —Ç–∞–±–ª–∏—Ü—ã
      {
        path: 'annual-tables/:id',
        element: <AnnualTableView />
      },
      
      // –ü–µ—Ä–µ—á–µ–Ω—å –æ–¥–æ–±—Ä–µ–Ω–Ω—ã—Ö (—Ñ–∏–ª—å—Ç—Ä)
      {
        path: 'approved',
        element: <ApprovedVarietiesList />
      },
      
      // –ü–µ—Ä–µ—á–µ–Ω—å —Å–Ω—è—Ç—ã—Ö (—Ñ–∏–ª—å—Ç—Ä)
      {
        path: 'removed',
        element: <RemovedVarietiesList />
      },
      
      // –ü—Ä–æ–¥–æ–ª–∂–∞—é—â–∏–µ (—Ñ–∏–ª—å—Ç—Ä)
      {
        path: 'continuing',
        element: <ContinuingVarietiesList />
      }
    ]
  }
];
```

---

## ‚úÖ –°–¢–ê–¢–£–°–´ –ò –ü–ï–†–ï–•–û–î–´

### **–°—Ç–∞—Ç—É—Å—ã —Ç–∞–±–ª–∏—Ü—ã:**

```
draft (–ß–µ—Ä–Ω–æ–≤–∏–∫)
  ‚Üì
  [–ü—Ä–∏–Ω—è—Ç–∏–µ –≤—Å–µ—Ö —Ä–µ—à–µ–Ω–∏–π]
  ‚Üì
  [–ö–ª–∏–∫ "–ó–∞–≤–µ—Ä—à–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É"]
  ‚Üì
finalized (–ó–∞–≤–µ—Ä—à–µ–Ω–∞)
```

**–ü—Ä–∞–≤–∏–ª–∞:**
- `draft` - –º–æ–∂–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å, –¥–æ–±–∞–≤–ª—è—Ç—å, —É–¥–∞–ª—è—Ç—å
- `finalized` - —Ç–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä, —ç–∫—Å–ø–æ—Ä—Ç

### **–°—Ç–∞—Ç—É—Å—ã —ç–ª–µ–º–µ–Ω—Ç–∞ (—Ä–µ—à–µ–Ω–∏—è):**

```
pending (–û–∂–∏–¥–∞–µ—Ç)
  ‚Üì
  [–ê–≥—Ä–æ–Ω–æ–º –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ä–µ—à–µ–Ω–∏–µ]
  ‚Üì
approved / continue / removed
```

---

## üö® –û–ë–†–ê–ë–û–¢–ö–ê –û–®–ò–ë–û–ö

### **–ü–æ–ø—ã—Ç–∫–∞ –∑–∞–≤–µ—Ä—à–∏—Ç—å –Ω–µ–ø–æ–ª–Ω—É—é —Ç–∞–±–ª–∏—Ü—É:**
```typescript
try {
  await annualDecisionsService.finalizeTable(tableId);
} catch (error) {
  if (error.response?.status === 400) {
    const data = error.response.data;
    alert(
      `${data.error}\n` +
      `–ü—Ä–∏–Ω—è—Ç–æ —Ä–µ—à–µ–Ω–∏–π: ${data.details.decided}/${data.details.total}\n` +
      `–û–∂–∏–¥–∞—é—Ç: ${data.details.pending}`
    );
  }
}
```

### **–ü–æ–ø—ã—Ç–∫–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—É—é —Ç–∞–±–ª–∏—Ü—É:**
```typescript
try {
  await annualDecisionsService.makeDecision(itemId, data);
} catch (error) {
  if (error.response?.status === 400) {
    alert('–¢–∞–±–ª–∏—Ü–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞. –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ.');
  }
}
```

---

## üì¶ –ó–ê–í–ò–°–ò–ú–û–°–¢–ò

### **Backend (requirements.txt):**
```
openpyxl>=3.0.0  # –î–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞ –≤ Excel
```

### **Frontend:**
```json
{
  "axios": "^1.6.0",
  "react": "^18.0.0",
  "react-router-dom": "^6.0.0"
}
```

---

## üéØ –ì–û–¢–û–í–û!

–í—Å–µ endpoints —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∏ –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! 

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**
1. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é: `docker exec trials-service python manage.py migrate`
2. –°–æ–∑–¥–∞—Ç—å fixture —Å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
3. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

---

## üìû SUPPORT

–í–æ–ø—Ä–æ—Å—ã? –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –ø–æ–ª–Ω–æ–π –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–µ –≤ –Ω–∞—á–∞–ª–µ —ç—Ç–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞.

