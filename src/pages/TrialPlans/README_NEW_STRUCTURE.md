# üéØ –ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ Trial Plans - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ (5 —É—Ä–æ–≤–Ω–µ–π)

```
1Ô∏è‚É£ TrialPlan (–ü–ª–∞–Ω –∏—Å–ø—ã—Ç–∞–Ω–∏–π)
    ‚Üì
2Ô∏è‚É£ PlanCulture (–ö—É–ª—å—Ç—É—Ä–∞ –≤ –ø–ª–∞–Ω–µ)
    ‚Üì
3Ô∏è‚É£ PlanCultureTrialType (–¢–∏–ø –∏—Å–ø—ã—Ç–∞–Ω–∏—è: –ö–°–ò/–û–û–°/–î–Æ–°) ‚≠ê –ù–û–í–´–ô –£–†–û–í–ï–ù–¨
    ‚Üì
4Ô∏è‚É£ TrialPlanParticipant (–£—á–∞—Å—Ç–Ω–∏–∫/—Å–æ—Ä—Ç)
    ‚Üì
5Ô∏è‚É£ TrialPlanTrial (–ò—Å–ø—ã—Ç–∞–Ω–∏—è –ø–æ —Ä–µ–≥–∏–æ–Ω–∞–º/–ì–°–£)
```

## üîÑ Workflow —Å–æ–∑–¥–∞–Ω–∏—è –ø–ª–∞–Ω–∞

### –®–∞–≥ 1: –°–æ–∑–¥–∞—Ç—å –ø–ª–∞–Ω
```
GET /trial-plans/ ‚Üí –°–ø–∏—Å–æ–∫ –ø–ª–∞–Ω–æ–≤
POST /trial-plans/ ‚Üí –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–ª–∞–Ω–∞
```

### –®–∞–≥ 2: –î–æ–±–∞–≤–∏—Ç—å –∫—É–ª—å—Ç—É—Ä—ã
```
POST /trial-plans/{id}/add-culture/
Body: { "culture_id": 26 }
```

### –®–∞–≥ 3: ‚≠ê –î–æ–±–∞–≤–∏—Ç—å —Ç–∏–ø—ã –∏—Å–ø—ã—Ç–∞–Ω–∏–π –∫ –∫—É–ª—å—Ç—É—Ä–∞–º
```
POST /trial-plans/{planId}/cultures/{cultureId}/add-trial-type/
Body: { 
  "trial_type_id": 1,
  "season": "spring"  ‚≠ê –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û–ï –ü–û–õ–ï
}
```

–ì–¥–µ:
- `trial_type_id`: 
  - `1` = –ö–°–ò (–ö–æ–Ω–∫—É—Ä—Å–Ω–æ–µ —Å–æ—Ä—Ç–æ–∏—Å–ø—ã—Ç–∞–Ω–∏–µ)
  - `2` = –û–û–° (–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–ª–∏—á–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–∏–∑–Ω–∞–∫–æ–≤)
  - `3` = –î–Æ–°
- `season`: `"spring"`, `"autumn"`, `"summer"`, `"winter"`

### –®–∞–≥ 4: –î–æ–±–∞–≤–∏—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –≤ —Ç–∏–ø—ã –∏—Å–ø—ã—Ç–∞–Ω–∏–π
```
POST /trial-plans/{planId}/cultures/{cultureId}/trial-types/{trialTypeId}/add-participant/
Body: {
  "patents_sort_id": 2241,
  "participant_number": 1,
  "maturity_group": "D03",
  "statistical_group": 1,
  "seeds_provision": "provided",
  "application_id": 27
}
```

### –®–∞–≥ 5: –î–æ–±–∞–≤–∏—Ç—å trials (—Ä–µ–≥–∏–æ–Ω—ã) –∫ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º
```
POST /trial-plans/{planId}/participants/{participantId}/add-trial/
Body: {
  "region_id": 122,
  "predecessor": "fallow",
  "seeding_rate": 5.0,
  "season": "spring"
}
```

## üìÅ –§–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞

### API & –¢–∏–ø—ã
- **`src/api/trialPlans.ts`** - API —Å–µ—Ä–≤–∏—Å —Å –º–µ—Ç–æ–¥–∞–º–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–ª–∞–Ω–∞–º–∏
  - –û–±–Ω–æ–≤–ª–µ–Ω—ã —Ç–∏–ø—ã –ø–æ–¥ –Ω–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É
  - –î–æ–±–∞–≤–ª–µ–Ω—ã –º–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å trial types
  - –î–æ–±–∞–≤–ª–µ–Ω—ã –º–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å participants –∏ trials

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

#### –ì–ª–∞–≤–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
- **`src/pages/TrialPlans/TrialPlanDetailNew.tsx`** - –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–ª–∞–Ω–∞
  - –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∏–µ—Ä–∞—Ä—Ö–∏—é: –ö—É–ª—å—Ç—É—Ä—ã ‚Üí –¢–∏–ø—ã –∏—Å–ø—ã—Ç–∞–Ω–∏–π ‚Üí –£—á–∞—Å—Ç–Ω–∏–∫–∏ ‚Üí Trials
  - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Accordions –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –ø–æ —Ç–∏–ø–∞–º –∏—Å–ø—ã—Ç–∞–Ω–∏–π

#### –î–∏–∞–ª–æ–≥–∏
- **`src/components/trialPlans/AddTrialTypeToCultureDialog.tsx`**
  - –î–∏–∞–ª–æ–≥ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–∏–ø–æ–≤ –∏—Å–ø—ã—Ç–∞–Ω–∏–π (–ö–°–ò/–û–û–°/–î–Æ–°) –∫ –∫—É–ª—å—Ç—É—Ä–µ
  - Checkbox –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –≤—ã–±–æ—Ä–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ç–∏–ø–æ–≤ —Å—Ä–∞–∑—É

- **`src/components/trialPlans/AddParticipantToTrialTypeDialog.tsx`**
  - –î–∏–∞–ª–æ–≥ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —É—á–∞—Å—Ç–Ω–∏–∫–∞ (—Å–æ—Ä—Ç–∞) –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–∏–ø –∏—Å–ø—ã—Ç–∞–Ω–∏—è
  - Autocomplete –¥–ª—è –ø–æ–∏—Å–∫–∞ —Å–æ—Ä—Ç–æ–≤ –∏–∑ Patents Service
  - –ü–æ–ª—è –¥–ª—è –≥—Ä—É–ø–ø—ã —Å–ø–µ–ª–æ—Å—Ç–∏, —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–æ–π –≥—Ä—É–ø–ø—ã, –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è —Å–µ–º–µ–Ω–∞–º–∏

- **`src/components/trialPlans/AddCultureToPlanDialog.tsx`** (—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π)
  - –î–∏–∞–ª–æ–≥ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫—É–ª—å—Ç—É—Ä—ã –≤ –ø–ª–∞–Ω

## üé® UI/UX

### –ù–∞–≤–∏–≥–∞—Ü–∏—è
```
Trial Plans List
  ‚Üì (–∫–ª–∏–∫ –Ω–∞ –ø–ª–∞–Ω)
Trial Plan Detail (–Ω–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç)
  - Header: –≥–æ–¥, –æ–±–ª–∞—Å—Ç—å, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
  - –°–ø–∏—Å–æ–∫ –∫—É–ª—å—Ç—É—Ä (Cards)
    - –ö–∞–∂–¥–∞—è –∫—É–ª—å—Ç—É—Ä–∞ –∏–º–µ–µ—Ç –∫–Ω–æ–ø–∫—É "–î–æ–±–∞–≤–∏—Ç—å —Ç–∏–ø –∏—Å–ø—ã—Ç–∞–Ω–∏—è"
    - –¢–∏–ø—ã –∏—Å–ø—ã—Ç–∞–Ω–∏–π –ø–æ–∫–∞–∑–∞–Ω—ã –≤ Accordions
      - –ö–∞–∂–¥—ã–π —Ç–∏–ø —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–ø–∏—Å–æ–∫ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
      - –ö–Ω–æ–ø–∫–∞ "–î–æ–±–∞–≤–∏—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–∞" –≤ –∫–∞–∂–¥–æ–º —Ç–∏–ø–µ
```

### –í–∏–∑—É–∞–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
```
üìã –ü–ª–∞–Ω 2025 - –ê–∫–º–æ–ª–∏–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å
  üåæ –ü—à–µ–Ω–∏—Ü–∞
    üî¨ –ö–°–ò (10 —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤)
      üë§ #1 - –°–æ—Ä—Ç "–ñ–∞–≤–æ—Ä–æ–Ω–æ–∫" [–†–µ–≥–∏–æ–Ω—ã: 3]
      üë§ #2 - –°–æ—Ä—Ç "–ö–∞—Ä–∞—Ç–∞–ª" [–†–µ–≥–∏–æ–Ω—ã: 2]
    üî¨ –û–û–° (5 —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤)
      üë§ #1 - –°–æ—Ä—Ç "–ù–æ–≤–∏–Ω–∫–∞" [–†–µ–≥–∏–æ–Ω—ã: 1]
  üåæ –Ø—á–º–µ–Ω—å
    üî¨ –ö–°–ò (8 —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤)
```

## üîë –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### 1. –¢–∏–ø—ã –∏—Å–ø—ã—Ç–∞–Ω–∏–π –º–µ–∂–¥—É –∫—É–ª—å—Ç—É—Ä–æ–π –∏ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏
- **–ë—ã–ª–æ**: –ü–ª–∞–Ω ‚Üí –ö—É–ª—å—Ç—É—Ä–∞ ‚Üí –£—á–∞—Å—Ç–Ω–∏–∫ (—Å trial_type –≤ –∫–∞–∂–¥–æ–º trial)
- **–°—Ç–∞–ª–æ**: –ü–ª–∞–Ω ‚Üí –ö—É–ª—å—Ç—É—Ä–∞ ‚Üí **–¢–∏–ø –∏—Å–ø—ã—Ç–∞–Ω–∏—è** ‚Üí –£—á–∞—Å—Ç–Ω–∏–∫ ‚Üí Trial

### 2. –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- ‚úÖ –õ–æ–≥–∏—á–Ω–∞—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –ø–æ —Ç–∏–ø–∞–º –∏—Å–ø—ã—Ç–∞–Ω–∏–π
- ‚úÖ –£–¥–æ–±–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è
- ‚úÖ –û–¥–∏–Ω —Å–æ—Ä—Ç –º–æ–∂–µ—Ç —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å –≤ —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–∞—Ö –∏—Å–ø—ã—Ç–∞–Ω–∏–π
- ‚úÖ –õ–µ–≥–∫–æ —Ä–∞–∑–ª–∏—á–∏—Ç—å –ö–°–ò, –û–û–° –∏ –î–Æ–° —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤

### 3. –ì–∏–±–∫–æ—Å—Ç—å
- –û–¥–Ω–∞ –∫—É–ª—å—Ç—É—Ä–∞ –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–∏–ø–æ–≤ –∏—Å–ø—ã—Ç–∞–Ω–∏–π
- ‚≠ê **–°–µ–∑–æ–Ω –∑–∞–¥–∞–µ—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ —Ç–∏–ø–∞ –∏—Å–ø—ã—Ç–∞–Ω–∏—è** (–Ω–µ –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø–ª–∞–Ω–∞ –∏–ª–∏ trial)
- –û–¥–∏–Ω —É—á–∞—Å—Ç–Ω–∏–∫ –º–æ–∂–µ—Ç –∏–º–µ—Ç—å trials –≤ —Ä–∞–∑–Ω—ã—Ö —Ä–µ–≥–∏–æ–Ω–∞—Ö
- –ö–∞–∂–¥—ã–π trial –∏–º–µ–µ—Ç —Å–≤–æ–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (–ø—Ä–µ–¥—à–µ—Å—Ç–≤–µ–Ω–Ω–∏–∫, –Ω–æ—Ä–º–∞ –≤—ã—Å–µ–≤–∞)

## üß™ –ü—Ä–∏–º–µ—Ä—ã —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ü—à–µ–Ω–∏—Ü–∞ —Ç–æ–ª—å–∫–æ –≤ –ö–°–ò
```
–ü–ª–∞–Ω 2025 ‚Üí –ü—à–µ–Ω–∏—Ü–∞ ‚Üí –ö–°–ò ‚Üí [10 —Å–æ—Ä—Ç–æ–≤] ‚Üí [–∏—Å–ø—ã—Ç–∞–Ω–∏—è –ø–æ 8 –ì–°–£]
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ü—à–µ–Ω–∏—Ü–∞ –≤ –ö–°–ò –∏ –û–û–°
```
–ü–ª–∞–Ω 2025 ‚Üí –ü—à–µ–Ω–∏—Ü–∞
  ‚îú‚îÄ –ö–°–ò ‚Üí [10 —Å–æ—Ä—Ç–æ–≤] ‚Üí [–∏—Å–ø—ã—Ç–∞–Ω–∏—è –ø–æ 8 –ì–°–£]
  ‚îî‚îÄ –û–û–° ‚Üí [5 –Ω–æ–≤—ã—Ö —Å–æ—Ä—Ç–æ–≤] ‚Üí [–∏—Å–ø—ã—Ç–∞–Ω–∏—è –ø–æ 3 –ì–°–£]
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ù–µ—Å–∫–æ–ª—å–∫–æ –∫—É–ª—å—Ç—É—Ä
```
–ü–ª–∞–Ω 2025
‚îú‚îÄ –ü—à–µ–Ω–∏—Ü–∞
‚îÇ   ‚îú‚îÄ –ö–°–ò ‚Üí [10 —Å–æ—Ä—Ç–æ–≤]
‚îÇ   ‚îî‚îÄ –û–û–° ‚Üí [5 —Å–æ—Ä—Ç–æ–≤]
‚îî‚îÄ –Ø—á–º–µ–Ω—å
    ‚îî‚îÄ –ö–°–ò ‚Üí [8 —Å–æ—Ä—Ç–æ–≤]
```

## üöÄ –ú–∏–≥—Ä–∞—Ü–∏—è —Å–æ —Å—Ç–∞—Ä–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

### –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å
1. **API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã**:
   - –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ endpoints –¥–ª—è trial types
   - –ò–∑–º–µ–Ω–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –≤ GET /trial-plans/{id}/

2. **–¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö** (`src/api/trialPlans.ts`):
   - –î–æ–±–∞–≤–ª–µ–Ω `PlanCultureTrialType`
   - –û–±–Ω–æ–≤–ª–µ–Ω `PlanCulture` (—Ç–µ–ø–µ—Ä—å —Å–æ–¥–µ—Ä–∂–∏—Ç `trial_types[]`)
   - –£–±—Ä–∞–Ω–æ `trial_type_id` –∏–∑ `TrialPlanTrial`

3. **UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**:
   - –ù–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `TrialPlanDetailNew` –∑–∞–º–µ–Ω—è–µ—Ç —Å—Ç–∞—Ä—ã–π
   - –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ –¥–∏–∞–ª–æ–≥–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å trial types

### –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
- –°—Ç–∞—Ä—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `TrialPlanDetail` —Å–æ—Ö—Ä–∞–Ω–µ–Ω –¥–ª—è —Å–ø—Ä–∞–≤–∫–∏
- –†–æ—É—Ç–∏–Ω–≥ –æ–±–Ω–æ–≤–ª–µ–Ω –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
- API —Å–µ—Ä–≤–∏—Å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ–±–∞ –ø–æ–¥—Ö–æ–¥–∞

## üìù TODO –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

- [ ] –î–æ–±–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
- [ ] –î–æ–±–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —É–¥–∞–ª–µ–Ω–∏—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
- [ ] –î–æ–±–∞–≤–∏—Ç—å drag-and-drop –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ—Ä—è–¥–∫–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
- [ ] –î–æ–±–∞–≤–∏—Ç—å –º–∞—Å—Å–æ–≤–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∏–∑ –∑–∞—è–≤–æ–∫
- [ ] –î–æ–±–∞–≤–∏—Ç—å —ç–∫—Å–ø–æ—Ä—Ç –ø–ª–∞–Ω–∞ –≤ Excel —Å –Ω–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π
- [ ] –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –Ω–æ–º–µ—Ä–æ–≤ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ (—É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –≤–Ω—É—Ç—Ä–∏ —Ç–∏–ø–∞ –∏—Å–ø—ã—Ç–∞–Ω–∏—è)
- [ ] –î–æ–±–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –º–µ–∂–¥—É —Ç–∏–ø–∞–º–∏ –∏—Å–ø—ã—Ç–∞–Ω–∏–π

